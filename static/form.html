<!-- <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <form
      enctype="multipart/form-data"
      action="http://localhost:9000/upload"
      method="post"
    >
      <input type="file" name="myFile" />
      <input type="submit" value="upload" />
    </form>
  </body>
</html> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
</head>

<body>
    <form enctype="multipart/form-data" action="http://localhost:9000/upload" method="post">
        <input type="file" name="myFile" />
        <input type="submit" value="Upload" />
    </form>

    <button onclick="fetchList()">Show List</button>

    <div id="fileList">
        <!-- The fetched list of files in the 'uploads' folder will be displayed here as buttons -->
    </div>

    <div id="fileContent">
        <!-- The content of the selected file will be displayed here -->
    </div>

    <script>
        function fetchList() {
            // Make an AJAX request to fetch the list of files in the 'uploads' folder
            fetch("http://localhost:9000/list")
                .then(response => response.json())
                .then(data => {
                    // Create buttons for each file
                    const fileListElement = document.getElementById("fileList");
                    fileListElement.innerHTML = '';

                    data.forEach(file => {
                        const button = document.createElement('button');
                        button.textContent = file.Name;
                        button.addEventListener('click', () => fetchContent(file.Name));
                        fileListElement.appendChild(button);
                    });
                })
                .catch(error => console.error("Error fetching uploaded files:", error));
        }

        function fetchContent(fileName) {
            // Make an AJAX request to fetch the content of the selected file
            fetch(`http://localhost:9000/content/uploads/${fileName}`)
                .then(response => response.text())
                .then(fileContent => {
                    // Display the content in the 'fileContent' div
                    document.getElementById("fileContent").textContent = `Content: ${fileContent}`;
                })
                .catch(error => console.error(`Error fetching content for ${fileName}:`, error));
        }
    </script>
</body>

</html>
